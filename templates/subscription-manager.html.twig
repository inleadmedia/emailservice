<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>{{ title|safe_join(' | ') }}</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <style>
    input[type="checkbox"] {
      margin: 3px 3px 3px 0;
    }
  </style>
</head>
<body class="bg-light">
{% if params.is_allowed %}
  <div class="container  bg-white rounded mt-5 border" style="background-color: #f1f1f2;">
    <div class="row p-3 shadow" style="border-bottom: 10px solid {{ headline_color }};">
      <div class="col-12">
        {{ logo }}
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-12">
        <p>{{ intro|raw }}</p>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <hr class="my-3">
      </div>
    </div>

    {% if messages %}
      <div class="row">
        <div class="col-12">
          {{ messages }}
        </div>
      </div>
    {% endif %}

    <div class="row my-3">
      <div class="col-12">
        {{ form }}
      </div>
    </div>
  </div>
{% else %}
  <div class="m-0 p-0 d-flex justify-content-center align-items-center" style="height: 100vh">
    <p class="lead">No params or wrong params provided.<br>Please re-check link you've received.</p>
  </div>
{% endif %}
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="{{ emailservice_path }}/emailservice.js"></script>
<script>
  var wrapper = $('.card-columns');
  var cards = wrapper.children();

  $.each(cards, function (index, card) {
    var ic = $(card).find('.js-form-type-checkbox');
    if (ic.length > 20) {
      $(card).attr('id', 'exceptional');
      $(card).insertBefore($('.card-columns'));
      var style = "-webkit-column-count: 3;moz-column-count: 3;column-count: 3;-webkit-column-gap: 1rem;-moz-column-gap: 1rem;column-gap: 1rem;orphans: 1;widows: 1;";
      $(card).find('.card-text').attr('style', style);
    }
  })
</script>
</body>
</html>
